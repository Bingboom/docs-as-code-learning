

<!DOCTYPE html>
<html class="writer-html5" lang="test-en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>基础 AT 命令集 &mdash; test 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=6b39a4d3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            test
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">基础 AT 命令集</a><ul>
<li><a class="reference internal" href="#cmd-basic-intro">介绍</a></li>
<li><a class="reference internal" href="#at-at"><span class="xref std std-ref">AT</span>：测试 AT 启动</a><ul>
<li><a class="reference internal" href="#id4">执行命令</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-rst"><span class="xref std std-ref">AT+RST</span>：重启模块</a><ul>
<li><a class="reference internal" href="#id5">执行命令</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-gmr"><span class="xref std std-ref">AT+GMR</span>：查看版本信息</a><ul>
<li><a class="reference internal" href="#id9">执行命令</a></li>
<li><a class="reference internal" href="#id10">参数</a></li>
<li><a class="reference internal" href="#id11">说明</a></li>
<li><a class="reference internal" href="#id12">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cmd"><span class="xref std std-ref">AT+CMD</span>：查询当前固件支持的所有命令及命令类型</a><ul>
<li><a class="reference internal" href="#id13">查询命令</a></li>
<li><a class="reference internal" href="#id14">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-gslp-deep-sleep"><span class="xref std std-ref">AT+GSLP</span>：进入 Deep-sleep 模式</a><ul>
<li><a class="reference internal" href="#id15">设置命令</a></li>
<li><a class="reference internal" href="#id16">参数</a></li>
<li><a class="reference internal" href="#id17">说明</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ate-at"><span class="xref std std-ref">ATE</span>：开启或关闭 AT 回显功能</a><ul>
<li><a class="reference internal" href="#id18">执行命令</a></li>
<li><a class="reference internal" href="#id19">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-restore"><span class="xref std std-ref">AT+RESTORE</span>：恢复出厂设置</a><ul>
<li><a class="reference internal" href="#id20">执行命令</a></li>
<li><a class="reference internal" href="#id21">说明</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-savetranslink-wi-fi-bluetooth-le"><span class="xref std std-ref">AT+SAVETRANSLINK</span>：设置开机 Wi-Fi/Bluetooth LE <span class="xref std std-term">透传模式</span> 信息</a><ul>
<li><a class="reference internal" href="#tcp-ssl">设置开机进入 TCP/SSL <span class="xref std std-term">透传模式</span> 信息</a><ul>
<li><a class="reference internal" href="#id22">设置命令</a></li>
<li><a class="reference internal" href="#id23">参数</a></li>
<li><a class="reference internal" href="#id24">说明</a></li>
<li><a class="reference internal" href="#id25">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#udp">设置开机进入 UDP <span class="xref std std-term">透传模式</span> 信息</a><ul>
<li><a class="reference internal" href="#id26">设置</a></li>
<li><a class="reference internal" href="#id27">参数</a></li>
<li><a class="reference internal" href="#id28">说明</a></li>
<li><a class="reference internal" href="#id29">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ble">设置开机进入 BLE <span class="xref std std-term">透传模式</span> 信息</a><ul>
<li><a class="reference internal" href="#id30">设置</a></li>
<li><a class="reference internal" href="#id31">参数</a></li>
<li><a class="reference internal" href="#id32">说明</a></li>
<li><a class="reference internal" href="#id33">示例</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#at-transintvl"><span class="xref std std-ref">AT+TRANSINTVL</span>：设置 <span class="xref std std-term">透传模式</span> 模式下的数据发送间隔</a><ul>
<li><a class="reference internal" href="#id34">查询命令</a></li>
<li><a class="reference internal" href="#id35">设置命令</a></li>
<li><a class="reference internal" href="#id36">参数</a></li>
<li><a class="reference internal" href="#id37">说明</a></li>
<li><a class="reference internal" href="#id38">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-uart-cur-uart-flash"><span class="xref std std-ref">AT+UART_CUR</span>：设置 UART 当前临时配置，不保存到 flash</a><ul>
<li><a class="reference internal" href="#id39">查询命令</a></li>
<li><a class="reference internal" href="#id40">设置命令</a></li>
<li><a class="reference internal" href="#id41">参数</a></li>
<li><a class="reference internal" href="#id42">说明</a></li>
<li><a class="reference internal" href="#id43">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-uart-def-uart-flash"><span class="xref std std-ref">AT+UART_DEF</span>：设置 UART 默认配置，保存到 flash</a><ul>
<li><a class="reference internal" href="#id44">查询命令</a></li>
<li><a class="reference internal" href="#id45">设置命令</a></li>
<li><a class="reference internal" href="#id46">参数</a></li>
<li><a class="reference internal" href="#id47">说明</a></li>
<li><a class="reference internal" href="#id48">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sleep"><span class="xref std std-ref">AT+SLEEP</span>：设置睡眠模式</a><ul>
<li><a class="reference internal" href="#id49">查询命令</a></li>
<li><a class="reference internal" href="#id50">设置命令</a></li>
<li><a class="reference internal" href="#id51">参数</a></li>
<li><a class="reference internal" href="#id52">说明</a></li>
<li><a class="reference internal" href="#id53">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysram"><span class="xref std std-ref">AT+SYSRAM</span>：查询当前剩余堆空间和最小堆空间</a><ul>
<li><a class="reference internal" href="#id54">查询命令</a></li>
<li><a class="reference internal" href="#id55">参数</a></li>
<li><a class="reference internal" href="#id56">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysmsg"><span class="xref std std-ref">AT+SYSMSG</span>：查询/设置系统提示信息</a><ul>
<li><a class="reference internal" href="#id57">查询命令</a></li>
<li><a class="reference internal" href="#id58">设置命令</a></li>
<li><a class="reference internal" href="#id59">参数</a></li>
<li><a class="reference internal" href="#id60">说明</a></li>
<li><a class="reference internal" href="#id61">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysmsgfilter"><span class="xref std std-ref">AT+SYSMSGFILTER</span>：启用或禁用 <span class="xref std std-term">系统消息</span> 过滤</a><ul>
<li><a class="reference internal" href="#id62">查询命令</a></li>
<li><a class="reference internal" href="#id63">设置命令</a></li>
<li><a class="reference internal" href="#id64">参数</a></li>
<li><a class="reference internal" href="#id65">说明</a><ul>
<li><a class="reference internal" href="#id66">示例</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysmsgfiltercfg"><span class="xref std std-ref">AT+SYSMSGFILTERCFG</span>：查询/配置 <span class="xref std std-term">系统消息</span> 的过滤器</a><ul>
<li><a class="reference internal" href="#sysmsgfiltercfg-query">查询过滤器</a><ul>
<li><a class="reference internal" href="#id68">查询命令</a></li>
<li><a class="reference internal" href="#id69">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sysmsgfiltercfg-clear">清除所有过滤器</a><ul>
<li><a class="reference internal" href="#id71">设置命令</a></li>
<li><a class="reference internal" href="#id72">参数</a></li>
<li><a class="reference internal" href="#id73">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sysmsgfiltercfg-add">增加一个过滤器</a><ul>
<li><a class="reference internal" href="#id75">设置命令</a></li>
<li><a class="reference internal" href="#id76">参数</a></li>
<li><a class="reference internal" href="#id77">说明</a></li>
<li><a class="reference internal" href="#id78">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sysmsgfiltercfg-delete">删除一个过滤器</a><ul>
<li><a class="reference internal" href="#id80">设置命令</a></li>
<li><a class="reference internal" href="#id81">参数</a></li>
<li><a class="reference internal" href="#id82">说明</a></li>
<li><a class="reference internal" href="#id83">示例</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysflash-flash"><span class="xref std std-ref">AT+SYSFLASH</span>：查询或读写 flash 用户分区</a><ul>
<li><a class="reference internal" href="#id84">查询命令</a></li>
<li><a class="reference internal" href="#id85">设置命令</a></li>
<li><a class="reference internal" href="#id86">参数</a></li>
<li><a class="reference internal" href="#id87">说明</a></li>
<li><a class="reference internal" href="#id88">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysmfg-manufacturing-nvs"><span class="xref std std-ref">AT+SYSMFG</span>：查询或读写 <span class="xref std std-term">manufacturing nvs</span> 用户分区</a><ul>
<li><a class="reference internal" href="#id89">查询命令</a></li>
<li><a class="reference internal" href="#id90">擦除命名空间或键值对</a><ul>
<li><a class="reference internal" href="#id91">设置命令</a></li>
<li><a class="reference internal" href="#id92">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id93">说明</a><ul>
<li><a class="reference internal" href="#id94">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id95">读取命名空间或键值对</a><ul>
<li><a class="reference internal" href="#id96">设置命令</a></li>
<li><a class="reference internal" href="#id97">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id98">说明</a><ul>
<li><a class="reference internal" href="#id100">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id101">向命名空间内写入键值对</a><ul>
<li><a class="reference internal" href="#id102">设置命令</a></li>
<li><a class="reference internal" href="#id103">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id104">说明</a><ul>
<li><a class="reference internal" href="#id106">示例</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#at-rfpower-rf-tx-power"><span class="xref std std-ref">AT+RFPOWER</span>：查询/设置 RF TX Power</a><ul>
<li><a class="reference internal" href="#id107">查询命令</a></li>
<li><a class="reference internal" href="#id108">设置命令</a></li>
<li><a class="reference internal" href="#id109">参数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id110">说明</a></li>
<li><a class="reference internal" href="#at-sysrollback"><span class="xref std std-ref">AT+SYSROLLBACK</span>：回滚到以前的固件</a><ul>
<li><a class="reference internal" href="#id111">执行命令</a></li>
<li><a class="reference internal" href="#id112">说明</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-systimestamp"><span class="xref std std-ref">AT+SYSTIMESTAMP</span>：查询/设置本地时间戳</a><ul>
<li><a class="reference internal" href="#id113">查询命令</a></li>
<li><a class="reference internal" href="#id114">设置命令</a></li>
<li><a class="reference internal" href="#id115">参数</a></li>
<li><a class="reference internal" href="#id116">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-syslog-at"><span class="xref std std-ref">AT+SYSLOG</span>：启用或禁用 AT 错误代码提示</a><ul>
<li><a class="reference internal" href="#id117">查询命令</a></li>
<li><a class="reference internal" href="#id118">设置命令</a></li>
<li><a class="reference internal" href="#id119">参数</a></li>
<li><a class="reference internal" href="#id120">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sleepwkcfg-light-sleep-gpio"><span class="xref std std-ref">AT+SLEEPWKCFG</span>：设置 Light-sleep 唤醒源和唤醒 GPIO</a><ul>
<li><a class="reference internal" href="#id121">设置命令</a></li>
<li><a class="reference internal" href="#id122">参数</a></li>
<li><a class="reference internal" href="#id123">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysstore"><span class="xref std std-ref">AT+SYSSTORE</span>：设置参数存储模式</a><ul>
<li><a class="reference internal" href="#id124">查询命令</a></li>
<li><a class="reference internal" href="#id125">设置命令</a></li>
<li><a class="reference internal" href="#id126">参数</a></li>
<li><a class="reference internal" href="#id127">说明</a></li>
<li><a class="reference internal" href="#id128">示例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysreg"><span class="xref std std-ref">AT+SYSREG</span>：读写寄存器</a><ul>
<li><a class="reference internal" href="#id129">设置命令</a></li>
<li><a class="reference internal" href="#id130">参数</a></li>
<li><a class="reference internal" href="#id131">说明</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">test</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">基础 AT 命令集</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Basic_AT_Commands.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="at">
<span id="basic-at"></span><h1>基础 AT 命令集<a class="headerlink" href="#at" title="Link to this heading"></a></h1>
<p><a href="#id1"><span class="problematic" id="id2">:link_to_translation:`en:[English]`</span></a></p>
<section id="cmd-basic-intro">
<span id="id3"></span><h2>介绍<a class="headerlink" href="#cmd-basic-intro" title="Link to this heading"></a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>默认的 AT 固件支持此页面下的所有 AT 命令。</p>
</div>
</section>
<section id="at-at">
<span id="cmd-at"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT</span></a>：测试 AT 启动<a class="headerlink" href="#at-at" title="Link to this heading"></a></h2>
<section id="id4">
<h3>执行命令<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-rst">
<span id="cmd-rst"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+RST</span></a>：重启模块<a class="headerlink" href="#at-rst" title="Link to this heading"></a></h2>
<section id="id5">
<h3>执行命令<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">RST</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-gmr">
<h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+GMR</span></a>：查看版本信息<a class="headerlink" href="#at-gmr" title="Link to this heading"></a></h2>
<section id="id9">
<h3>执行命令<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GMR</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">AT</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">SDK</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nb">compile</span> <span class="n">time</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">Bin</span> <span class="n">version</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3>参数<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;AT version info&gt;</strong>：AT 核心库的版本信息，它们在 <code class="docutils literal notranslate"><span class="pre">esp-at/components/at/lib/</span></code> 目录下。代码是闭源的，无开放计划。</p></li>
<li><p><strong>&lt;SDK version info&gt;</strong>：AT 使用的平台 SDK 版本信息，它们定义在 <code class="docutils literal notranslate"><span class="pre">esp-at/module_config/module_{platform}_default/IDF_VERSION</span></code> 文件中。</p></li>
<li><p><strong>&lt;compile time&gt;</strong>：固件生成时间。</p></li>
<li><p><strong>&lt;Bin version&gt;</strong>: AT 固件版本信息。版本信息可以在 menuconfig 中修改。（<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">menuconfig</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Component</span> <span class="pre">config</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">AT</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">AT</span> <span class="pre">firmware</span> <span class="pre">version.</span></code>）</p></li>
</ul>
</section>
<section id="id11">
<h3>说明<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>如果您在使用 ESP-AT 固件中有任何问题，请先提供 <code class="docutils literal notranslate"><span class="pre">AT+GMR</span></code> 版本信息。</p></li>
</ul>
</section>
<section id="id12">
<h3>示例<a class="headerlink" href="#id12" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GMR</span>
<span class="n">AT</span> <span class="n">version</span><span class="p">:</span><span class="mf">2.2.0.0</span><span class="o">-</span><span class="n">dev</span><span class="p">(</span><span class="n">ca41ec4</span> <span class="o">-</span> <span class="p">{</span><span class="n">IDF_TARGET_NAME</span><span class="p">}</span> <span class="o">-</span> <span class="n">Sep</span> <span class="mi">16</span> <span class="mi">2020</span> <span class="mi">11</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">17</span><span class="p">)</span>
<span class="n">SDK</span> <span class="n">version</span><span class="p">:</span><span class="n">v4</span><span class="mf">.0.1</span><span class="o">-</span><span class="mi">193</span><span class="o">-</span><span class="n">ge7ac221b4</span>
<span class="nb">compile</span> <span class="n">time</span><span class="p">(</span><span class="mi">98</span><span class="n">b95fc</span><span class="p">):</span><span class="n">Oct</span> <span class="mi">29</span> <span class="mi">2020</span> <span class="mi">11</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">25</span>
<span class="n">Bin</span> <span class="n">version</span><span class="p">:</span><span class="mf">2.1.0</span><span class="p">(</span><span class="n">MINI</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cmd">
<span id="cmd-cmd"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+CMD</span></a>：查询当前固件支持的所有命令及命令类型<a class="headerlink" href="#at-cmd" title="Link to this heading"></a></h2>
<section id="id13">
<h3>查询命令<a class="headerlink" href="#id13" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CMD?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CMD</span><span class="p">:</span><span class="o">&lt;</span><span class="n">index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">AT</span> <span class="n">command</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">test</span> <span class="n">command</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">query</span> <span class="n">command</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="nb">set</span> <span class="n">command</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">execute</span> <span class="n">command</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id14">
<h3>参数<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;index&gt;</strong>：AT 命令序号</p></li>
<li><p><strong>&lt;AT command name&gt;</strong>：AT 命令名称</p></li>
<li><p><strong>&lt;support test command&gt;</strong>：0 表示不支持，1 表示支持</p></li>
<li><p><strong>&lt;support query command&gt;</strong>：0 表示不支持，1 表示支持</p></li>
<li><p><strong>&lt;support set command&gt;</strong>：0 表示不支持，1 表示支持</p></li>
<li><p><strong>&lt;support execute command&gt;</strong>：0 表示不支持，1 表示支持</p></li>
</ul>
</section>
</section>
<section id="at-gslp-deep-sleep">
<span id="cmd-gslp"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+GSLP</span></a>：进入 Deep-sleep 模式<a class="headerlink" href="#at-gslp-deep-sleep" title="Link to this heading"></a></h2>
<section id="id15">
<h3>设置命令<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GSLP</span><span class="o">=&lt;</span><span class="n">time</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3>参数<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;time&gt;</strong>：设备进入 Deep-sleep 的时长，单位：毫秒。设定时间到后，设备自动唤醒，调用深度睡眠唤醒桩，然后加载应用程序。</p>
<ul>
<li><p>最大 Deep-sleep 时长约为 28.8 天（2 <sup>31</sup>-1 毫秒）。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id17">
<h3>说明<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>由于外部因素的影响，所有设备进入 Deep-sleep 的实际时长与理论时长之间会存在差异。</p></li>
</ul>
</section>
</section>
<section id="ate-at">
<span id="cmd-ate"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">ATE</span></a>：开启或关闭 AT 回显功能<a class="headerlink" href="#ate-at" title="Link to this heading"></a></h2>
<section id="id18">
<h3>执行命令<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATE0</span>
</pre></div>
</div>
<p>或</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATE1</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id19">
<h3>参数<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>ATE0</strong>：关闭回显</p></li>
<li><p><strong>ATE1</strong>：开启回显</p></li>
</ul>
</section>
</section>
<section id="at-restore">
<span id="cmd-restore"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+RESTORE</span></a>：恢复出厂设置<a class="headerlink" href="#at-restore" title="Link to this heading"></a></h2>
<section id="id20">
<h3>执行命令<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">RESTORE</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id21">
<h3>说明<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>该命令将擦除所有保存到 flash 的参数，并恢复为默认参数。</p></li>
<li><p>运行该命令会重启设备。</p></li>
</ul>
</section>
</section>
<section id="at-savetranslink-wi-fi-bluetooth-le">
<span id="cmd-savet"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SAVETRANSLINK</span></a>：设置开机 Wi-Fi/Bluetooth LE <span class="xref std std-term">透传模式</span> 信息<a class="headerlink" href="#at-savetranslink-wi-fi-bluetooth-le" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#savetrans-tcpssl"><span class="std std-ref">设置开机进入 TCP/SSL 透传模式 信息</span></a></p></li>
<li><p><a class="reference internal" href="#savetrans-udp"><span class="std std-ref">设置开机进入 UDP 透传模式 信息</span></a></p></li>
<li><p><a class="reference internal" href="#savetrans-ble"><span class="std std-ref">设置开机进入 BLE 透传模式 信息</span></a></p></li>
</ul>
<section id="tcp-ssl">
<span id="savetrans-tcpssl"></span><h3>设置开机进入 TCP/SSL <span class="xref std std-term">透传模式</span> 信息<a class="headerlink" href="#tcp-ssl" title="Link to this heading"></a></h3>
<section id="id22">
<h4>设置命令<a class="headerlink" href="#id22" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">keep_alive</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id23">
<h4>参数<a class="headerlink" href="#id23" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>0: 关闭 {IDF_TARGET_NAME} 上电进入 Wi-Fi <span class="xref std std-term">透传模式</span></p></li>
<li><p>1: 开启 {IDF_TARGET_NAME} 上电进入 Wi-Fi <span class="xref std std-term">透传模式</span></p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>：字符串参数，表示远端 IPv4 地址、IPv6 地址，或域名。最长为 64 字节。</p></li>
<li><p><strong>&lt;remote port&gt;</strong>：远端端口值</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>：字符串参数，表示传输类型：&quot;TCP&quot;，&quot;TCPv6&quot;，&quot;SSL&quot;，或 &quot;SSLv6&quot;。默认值：&quot;TCP&quot;</p></li>
<li><p><strong>&lt;keep_alive&gt;</strong>：配置套接字的 <code class="docutils literal notranslate"><span class="pre">SO_KEEPALIVE</span></code> 选项（参考：<a class="reference external" href="https://man7.org/linux/man-pages/man7/socket.7.html#SO_KEEPALIVE">SO_KEEPALIVE 介绍</a>），单位：秒。</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>范围：[0,7200]。</p>
<ul>
<li><p>0：禁用 keep-alive 功能；（默认）</p></li>
<li><p>1 ~ 7200：开启 keep-alive 功能。<a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPIDLE">TCP_KEEPIDLE</a> 值为 <strong>&lt;keep_alive&gt;</strong>，<a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPINTVL">TCP_KEEPINTVL</a> 值为 1，<a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPCNT">TCP_KEEPCNT</a> 值为 3。</p></li>
</ul>
</li>
<li><p>本命令中的 <code class="docutils literal notranslate"><span class="pre">&lt;keep_alive&gt;</span></code> 参数与 <span class="xref std std-ref">AT+CIPTCPOPT</span> 命令中的 <code class="docutils literal notranslate"><span class="pre">&lt;keep_alive&gt;</span></code> 参数相同，最终值由后设置的命令决定。如果运行本命令时不设置 <code class="docutils literal notranslate"><span class="pre">&lt;keep_alive&gt;</span></code> 参数，则默认使用上次配置的值。</p></li>
</ul>
</div></blockquote>
</section>
<section id="id24">
<h4>说明<a class="headerlink" href="#id24" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>本设置将 Wi-Fi 开机 <span class="xref std std-term">透传模式</span> 信息保存在 NVS 区，若参数 <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> 为 1 ，下次上电自动进入 <span class="xref std std-term">透传模式</span>。需重启生效。</p></li>
</ul>
</section>
<section id="id25">
<h4>示例<a class="headerlink" href="#id25" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;192.168.6.110&quot;</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="s2">&quot;TCP&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;www.baidu.com&quot;</span><span class="p">,</span><span class="mi">443</span><span class="p">,</span><span class="s2">&quot;SSL&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;240e:3a1:2070:11c0:55ce:4e19:9649:b75&quot;</span><span class="p">,</span><span class="mi">8080</span><span class="p">,</span><span class="s2">&quot;TCPv6&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;240e:3a1:2070:11c0:55ce:4e19:9649:b75&quot;</span><span class="p">,</span><span class="mi">8080</span><span class="p">,</span><span class="s2">&quot;SSLv6</span>
</pre></div>
</div>
</section>
</section>
<section id="udp">
<span id="savetrans-udp"></span><h3>设置开机进入 UDP <span class="xref std std-term">透传模式</span> 信息<a class="headerlink" href="#udp" title="Link to this heading"></a></h3>
<section id="id26">
<h4>设置<a class="headerlink" href="#id26" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">,[</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">local</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id27">
<h4>参数<a class="headerlink" href="#id27" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>0: 关闭 {IDF_TARGET_NAME} 上电进入 Wi-Fi <span class="xref std std-term">透传模式</span></p></li>
<li><p>1: 开启 {IDF_TARGET_NAME} 上电进入 Wi-Fi <span class="xref std std-term">透传模式</span></p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>：字符串参数，表示远端 IPv4 地址、IPv6 地址，或域名。最长为 64 字节。</p></li>
<li><p><strong>&lt;remote port&gt;</strong>：远端端口值</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>：字符串参数，表示传输类型：&quot;UDP&quot; 或 &quot;UDPv6&quot;。默认值：&quot;TCP&quot;</p></li>
<li><p><strong>[&lt;local port&gt;]</strong>：开机进入 UDP 传输时，使用的本地端口</p></li>
</ul>
</section>
<section id="id28">
<h4>说明<a class="headerlink" href="#id28" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>本设置将 Wi-Fi 开机 <span class="xref std std-term">透传模式</span> 信息保存在 NVS 区，若参数 <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> 为 1 ，下次上电自动进入 <span class="xref std std-term">透传模式</span>。需重启生效。</p></li>
<li><p>如果您想基于 IPv6 网络建立一个 UDP 传输，请执行以下操作：</p>
<ul>
<li><p>确保 AP 支持 IPv6</p></li>
<li><p>设置 <span class="xref std std-ref">AT+CIPV6=1</span></p></li>
<li><p>通过 <span class="xref std std-ref">AT+CWJAP</span> 命令获取到一个 IPv6 地址</p></li>
<li><p>（可选）通过 <span class="xref std std-ref">AT+CIPSTA?</span> 命令检查 {IDF_TARGET_NAME} 是否获取到 IPv6 地址</p></li>
</ul>
</li>
</ul>
</section>
<section id="id29">
<h4>示例<a class="headerlink" href="#id29" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;192.168.6.110&quot;</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="s2">&quot;UDP&quot;</span><span class="p">,</span><span class="mi">1005</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;240e:3a1:2070:11c0:55ce:4e19:9649:b75&quot;</span><span class="p">,</span><span class="mi">8081</span><span class="p">,</span><span class="s2">&quot;UDPv6&quot;</span><span class="p">,</span><span class="mi">1005</span>
</pre></div>
</div>
</section>
</section>
<section id="ble">
<span id="savetrans-ble"></span><h3>设置开机进入 BLE <span class="xref std std-term">透传模式</span> 信息<a class="headerlink" href="#ble" title="Link to this heading"></a></h3>
<section id="id30">
<h4>设置<a class="headerlink" href="#id30" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">role</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tx_srv</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tx_char</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">rx_srv</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">rx_char</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">peer_addr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id31">
<h4>参数<a class="headerlink" href="#id31" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;mode&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>0: 关闭 {IDF_TARGET_NAME} 上电进入 BLE <span class="xref std std-term">透传模式</span></p></li>
<li><p>2: 开启 {IDF_TARGET_NAME} 上电进入 BLE <span class="xref std std-term">透传模式</span></p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;role&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>1: client 角色</p></li>
<li><p>2: server 角色</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;tx_srv&gt;</strong>：tx 服务序号。AT 作为 GATTC 时，通过 <span class="xref std std-ref">AT+BLEGATTCPRIMSRV</span>=&lt;conn_index&gt; 命令查询；作为 GATTS 时，通过 <span class="xref std std-ref">AT+BLEGATTSSRV?</span> 命令查询。</p></li>
<li><p><strong>&lt;tx_char&gt;</strong>：tx 服务特征序号。AT 作为 GATTC 时，通过 <span class="xref std std-ref">AT+BLEGATTCCHAR</span>=&lt;conn_index&gt;,&lt;srv_index&gt; 命令查询；作为 GATTS 时，通过 <span class="xref std std-ref">AT+BLEGATTSCHAR?</span> 命令查询。</p></li>
<li><p><strong>&lt;rx_srv&gt;</strong>：rx 服务序号。AT 作为 GATTC 时，通过 <span class="xref std std-ref">AT+BLEGATTCPRIMSRV</span>=&lt;conn_index&gt; 命令查询；作为 GATTS 时，通过 <span class="xref std std-ref">AT+BLEGATTSSRV?</span> 命令查询。</p></li>
<li><p><strong>&lt;rx_char&gt;</strong>：rx 服务特征序号。AT 作为 GATTC 时，通过 <span class="xref std std-ref">AT+BLEGATTCCHAR</span>=&lt;conn_index&gt;,&lt;srv_index&gt; 命令查询；作为 GATTS 时，通过 <span class="xref std std-ref">AT+BLEGATTSCHAR?</span> 命令查询。</p></li>
<li><p><strong>&lt;peer_addr&gt;</strong>：对方 Bluetooth LE 地址</p></li>
</ul>
</section>
<section id="id32">
<h4>说明<a class="headerlink" href="#id32" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>本设置将 BLE 开机 <span class="xref std std-term">透传模式</span> 信息保存在 NVS 区，若参数 <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> 为 2，下次上电自动进入 Bluetooth LE <span class="xref std std-term">透传模式</span>。需重启生效。</p></li>
</ul>
</section>
<section id="id33">
<h4>示例<a class="headerlink" href="#id33" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;26:a2:11:22:33:88&quot;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="at-transintvl">
<span id="cmd-transintvl"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+TRANSINTVL</span></a>：设置 <span class="xref std std-term">透传模式</span> 模式下的数据发送间隔<a class="headerlink" href="#at-transintvl" title="Link to this heading"></a></h2>
<section id="id34">
<h3>查询命令<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+TRANSINTVL?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">TRANSINTVL</span><span class="p">:</span><span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id35">
<h3>设置命令<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">TRANSINTVL</span><span class="o">=&lt;</span><span class="n">interval</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id36">
<h3>参数<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;interval&gt;</strong>：数据发送间隔。单位：毫秒。默认值：20。范围：[0,1000]。</p></li>
</ul>
</section>
<section id="id37">
<h3>说明<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>透传模式下，当 {IDF_TARGET_NAME} 从 UART 接收到数据后，如果收到的数据长度大于等于 2920 字节，数据会立即被分为每 2920 字节一组的块进行发送，否则会等待 <code class="docutils literal notranslate"><span class="pre">&lt;interval&gt;</span></code> 毫秒或等待收到的数据大于等于 2920 字节再发送数据。</p></li>
<li><p>当数据量很小，且数据发送间隔很短时，可以通过设置 <code class="docutils literal notranslate"><span class="pre">&lt;interval&gt;</span></code> 来调整数据发送的时机。当 <code class="docutils literal notranslate"><span class="pre">&lt;interval&gt;</span></code> 很小时，可以降低向协议栈发送数据的延时，但这会增加协议栈数据向网络发送的次数，一定程度降低了吞吐性能。</p></li>
</ul>
</section>
<section id="id38">
<h3>示例<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">设置收到数据后立即发送</span>
<span class="n">AT</span><span class="o">+</span><span class="n">TRANSINTVL</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-uart-cur-uart-flash">
<span id="cmd-uartc"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+UART_CUR</span></a>：设置 UART 当前临时配置，不保存到 flash<a class="headerlink" href="#at-uart-cur-uart-flash" title="Link to this heading"></a></h2>
<section id="id39">
<h3>查询命令<a class="headerlink" href="#id39" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+UART_CUR?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">UART_CUR</span><span class="p">:</span><span class="o">&lt;</span><span class="n">baudrate</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">databits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">parity</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow</span> <span class="n">control</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id40">
<h3>设置命令<a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">UART_CUR</span><span class="o">=&lt;</span><span class="n">baudrate</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">databits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">parity</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow</span> <span class="n">control</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id41">
<h3>参数<a class="headerlink" href="#id41" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;baudrate&gt;</strong>：UART 波特率</p>
<ul>
<li><p>{IDF_TARGET_NAME} 设备：支持范围为 80 ~ 5000000</p></li>
</ul>
</li>
<li><p><strong>&lt;databits&gt;</strong>：数据位</p>
<ul>
<li><p>5：5 bit 数据位</p></li>
<li><p>6：6 bit 数据位</p></li>
<li><p>7：7 bit 数据位</p></li>
<li><p>8：8 bit 数据位</p></li>
</ul>
</li>
<li><p><strong>&lt;stopbits&gt;</strong>：停止位</p>
<ul>
<li><p>1：1 bit 停止位</p></li>
<li><p>2：1.5 bit 停止位</p></li>
<li><p>3：2 bit 停止位</p></li>
</ul>
</li>
<li><p><strong>&lt;parity&gt;</strong>：校验位</p>
<ul>
<li><p>0：None</p></li>
<li><p>1：Odd</p></li>
<li><p>2：Even</p></li>
</ul>
</li>
<li><p><strong>&lt;flow control&gt;</strong>：流控</p>
<ul>
<li><p>0：不使能流控</p></li>
<li><p>1：使能 RTS</p></li>
<li><p>2：使能 CTS</p></li>
<li><p>3：同时使能 RTS 和 CTS</p></li>
</ul>
</li>
</ul>
</section>
<section id="id42">
<h3>说明<a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>查询命令返回的是 UART 配置参数的实际值，由于时钟分频的原因，可能与设定值有细微的差异。</p></li>
<li><p>本设置不保存到 flash。</p></li>
<li><p>使用硬件流控功能需要连接设备的 CTS/RTS 管脚，详情请见 <span class="xref std std-doc">../Get_Started/Hardware_connection</span> 和 <code class="docutils literal notranslate"><span class="pre">components/customized_partitions/raw_data/factory_param/factory_param_data.csv</span></code>。</p></li>
</ul>
</section>
<section id="id43">
<h3>示例<a class="headerlink" href="#id43" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">UART_CUR</span><span class="o">=</span><span class="mi">115200</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span>
</pre></div>
</div>
</section>
</section>
<section id="at-uart-def-uart-flash">
<span id="cmd-uartd"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+UART_DEF</span></a>：设置 UART 默认配置，保存到 flash<a class="headerlink" href="#at-uart-def-uart-flash" title="Link to this heading"></a></h2>
<section id="id44">
<h3>查询命令<a class="headerlink" href="#id44" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+UART_DEF?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">UART_DEF</span><span class="p">:</span><span class="o">&lt;</span><span class="n">baudrate</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">databits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">parity</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow</span> <span class="n">control</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id45">
<h3>设置命令<a class="headerlink" href="#id45" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">UART_DEF</span><span class="o">=&lt;</span><span class="n">baudrate</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">databits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">parity</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow</span> <span class="n">control</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id46">
<h3>参数<a class="headerlink" href="#id46" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;baudrate&gt;</strong>：UART 波特率</p>
<ul>
<li><p>{IDF_TARGET_NAME} 设备：支持范围为 80 ~ 5000000</p></li>
</ul>
</li>
<li><p><strong>&lt;databits&gt;</strong>：数据位</p>
<ul>
<li><p>5：5 bit 数据位</p></li>
<li><p>6：6 bit 数据位</p></li>
<li><p>7：7 bit 数据位</p></li>
<li><p>8：8 bit 数据位</p></li>
</ul>
</li>
<li><p><strong>&lt;stopbits&gt;</strong>：停止位</p>
<ul>
<li><p>1：1 bit 停止位</p></li>
<li><p>2：1.5 bit 停止位</p></li>
<li><p>3：2 bit 停止位</p></li>
</ul>
</li>
<li><p><strong>&lt;parity&gt;</strong>：校验位</p>
<ul>
<li><p>0：None</p></li>
<li><p>1：Odd</p></li>
<li><p>2：Even</p></li>
</ul>
</li>
<li><p><strong>&lt;flow control&gt;</strong>：流控</p>
<ul>
<li><p>0：不使能流控</p></li>
<li><p>1：使能 RTS</p></li>
<li><p>2：使能 CTS</p></li>
<li><p>3：同时使能 RTS 和 CTS</p></li>
</ul>
</li>
</ul>
</section>
<section id="id47">
<h3>说明<a class="headerlink" href="#id47" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>配置更改将保存在 NVS 分区，当设备再次上电时仍然有效。</p></li>
<li><p>使用硬件流控功能需要连接设备的 CTS/RTS 管脚，详情请见 <span class="xref std std-doc">../Get_Started/Hardware_connection</span> 和 <code class="docutils literal notranslate"><span class="pre">components/customized_partitions/raw_data/factory_param/factory_param_data.csv</span></code>。</p></li>
</ul>
</section>
<section id="id48">
<h3>示例<a class="headerlink" href="#id48" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">UART_DEF</span><span class="o">=</span><span class="mi">115200</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span>
</pre></div>
</div>
</section>
</section>
<section id="at-sleep">
<span id="cmd-sleep"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SLEEP</span></a>：设置睡眠模式<a class="headerlink" href="#at-sleep" title="Link to this heading"></a></h2>
<section id="id49">
<h3>查询命令<a class="headerlink" href="#id49" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SLEEP?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SLEEP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">sleep</span> <span class="n">mode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id50">
<h3>设置命令<a class="headerlink" href="#id50" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLEEP</span><span class="o">=&lt;</span><span class="n">sleep</span> <span class="n">mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id51">
<h3>参数<a class="headerlink" href="#id51" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>&lt;sleep mode&gt;</strong>：</p>
<ul>
<li><p>0：禁用睡眠模式</p></li>
<li><p>1：Modem-sleep 模式</p>
<ul class="simple">
<li><p>单 Wi-Fi 模式</p>
<ul>
<li><p>射频模块将根据 AP 的 <code class="docutils literal notranslate"><span class="pre">DTIM</span></code> 定期关闭</p></li>
</ul>
</li>
<li><p>单 BLE 模式</p>
<ul>
<li><p>在 BLE 广播态下，射频模块将根据广播间隔定期关闭</p></li>
<li><p>在 BLE 连接态下，射频模块将根据连接间隔定期关闭</p></li>
</ul>
</li>
</ul>
</li>
<li><p>2：Light-sleep 模式</p>
<ul>
<li><p>无 Wi-Fi 模式</p>
<ul class="simple">
<li><p>CPU 将自动进入睡眠，射频模块将关闭</p></li>
</ul>
</li>
<li><p>单 Wi-Fi 模式</p>
<ul class="simple">
<li><p>CPU 将自动进入睡眠，射频模块也将根据 <span class="xref std std-ref">AT+CWJAP</span> 命令设置的 <code class="docutils literal notranslate"><span class="pre">listen</span> <span class="pre">interval</span></code> 参数定期关闭</p></li>
</ul>
</li>
<li><p>单 Bluetooth 模式</p>
<ul class="simple">
<li><p>在 Bluetooth 广播态下，CPU 将自动进入睡眠，射频模块也将根据广播间隔定期关闭</p></li>
<li><p>在 Bluetooth 连接态下，CPU 将自动进入睡眠，射频模块也将根据连接间隔定期关闭</p></li>
</ul>
</li>
<li><p>Wi-Fi 和 Bluetooth 共存模式</p>
<blockquote>
<div><ul class="simple">
<li><p>CPU 将自动进入睡眠，射频模块根据电源管理模块定期关闭</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p>3：Modem-sleep listen interval 模式</p>
<ul class="simple">
<li><p>单 Wi-Fi 模式</p>
<ul>
<li><p>射频模块将根据 <span class="xref std std-ref">AT+CWJAP</span> 命令设置的 <code class="docutils literal notranslate"><span class="pre">listen</span> <span class="pre">interval</span></code> 参数定期关闭</p></li>
</ul>
</li>
<li><p>单 BLE 模式</p>
<ul>
<li><p>在 BLE 广播态下，射频模块将根据广播间隔定期关闭</p></li>
<li><p>在 BLE 连接态下，射频模块将根据连接间隔定期关闭</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="id52">
<h3>说明<a class="headerlink" href="#id52" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>当禁用睡眠模式后，Bluetooth LE 不可以被初始化。当 Bluetooth LE 初始化后，不可以禁用睡眠模式。</p></li>
<li><p>Modem-sleep 模式和 Light-sleep 模式均可以在 Wi-Fi 模式或者 BLE 模式下设置，但在 Wi-Fi 模式下，这两种模式只能在 <code class="docutils literal notranslate"><span class="pre">station</span></code> 模式下设置</p></li>
<li><p>设置 Light-sleep 模式前，建议提前通过 <a class="reference internal" href="#cmd-wkcfg"><span class="std std-ref">AT+SLEEPWKCFG</span></a> 命令设置好唤醒源，否则没法唤醒，设备将一直处于睡眠状态</p></li>
<li><p>设置 Light-sleep 模式后，如果 Light-sleep 唤醒条件不满足时，设备将自动进入睡眠模式，当 Light-sleep 唤醒条件满足时，设备将自动从睡眠模式中唤醒</p></li>
<li><p>对于 BLE 模式下的 Light-sleep 模式，用户必须确保外接 32KHz 晶振，否则，Light-sleep 模式会以 Modem-sleep 模式工作。</p></li>
<li><p>AT+SLEEP 更多示例请参考文档 <span class="xref std std-doc">../AT_Command_Examples/sleep_at_examples</span>。</p></li>
</ul>
</section>
<section id="id53">
<h3>示例<a class="headerlink" href="#id53" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLEEP</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-sysram">
<span id="cmd-sysram"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSRAM</span></a>：查询当前剩余堆空间和最小堆空间<a class="headerlink" href="#at-sysram" title="Link to this heading"></a></h2>
<section id="id54">
<h3>查询命令<a class="headerlink" href="#id54" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSRAM?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSRAM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">remaining</span> <span class="n">RAM</span> <span class="n">size</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">minimum</span> <span class="n">heap</span> <span class="n">size</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id55">
<h3>参数<a class="headerlink" href="#id55" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;remaining RAM size&gt;</strong>：当前剩余堆空间，单位：byte</p></li>
<li><p><strong>&lt;minimum heap size&gt;</strong>：运行时的最小堆空间，单位：byte。当 <code class="docutils literal notranslate"><span class="pre">&lt;minimum</span> <span class="pre">heap</span> <span class="pre">size&gt;</span></code> 小于或接近于 10 KB 时，{IDF_TARGET_NAME} 的 Wi-Fi 和低功耗蓝牙的功能可能会受影响。</p></li>
</ul>
</section>
<section id="id56">
<h3>示例<a class="headerlink" href="#id56" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSRAM?
+SYSRAM:148408,84044
OK
</pre></div>
</div>
</section>
</section>
<section id="at-sysmsg">
<span id="cmd-sysmsg"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSMSG</span></a>：查询/设置系统提示信息<a class="headerlink" href="#at-sysmsg" title="Link to this heading"></a></h2>
<section id="id57">
<h3>查询命令<a class="headerlink" href="#id57" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询当前系统提示信息状态</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSMSG?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMSG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id58">
<h3>设置命令<a class="headerlink" href="#id58" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>设置系统提示信息。如果您需要更加精细的管理 AT 消息，请使用 <a class="reference internal" href="#cmd-sysmsgfilter"><span class="std std-ref">AT+SYSMSGFILTER</span></a> 命令。</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMSG</span><span class="o">=&lt;</span><span class="n">state</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id59">
<h3>参数<a class="headerlink" href="#id59" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>&lt;state&gt;</strong>：</p>
<ul>
<li><p>Bit0：退出 Wi-Fi <span class="xref std std-term">透传模式</span>, Bluetooth LE SPP 及 Bluetooth SPP 时是否打印提示信息</p>
<ul class="simple">
<li><p>0：不打印</p></li>
<li><p>1：打印 <code class="docutils literal notranslate"><span class="pre">+QUITT</span></code></p></li>
</ul>
</li>
<li><p>Bit1：连接时提示信息类型</p>
<ul class="simple">
<li><p>0：使用简单版提示信息，如 <code class="docutils literal notranslate"><span class="pre">XX,CONNECT</span></code></p></li>
<li><p>1：使用详细版提示信息，如 <code class="docutils literal notranslate"><span class="pre">+LINK_CONN:status_type,link_id,ip_type,terminal_type,remote_ip,remote_port,local_port</span></code></p></li>
</ul>
</li>
<li><p>Bit2：连接状态提示信息，适用于 Wi-Fi <span class="xref std std-term">透传模式</span>、Bluetooth LE SPP 及 Bluetooth SPP</p>
<ul class="simple">
<li><p>0：不打印提示信息</p></li>
<li><p>1：当 Wi-Fi、socket、Bluetooth LE 或 Bluetooth 状态发生改变时，打印提示信息，如：</p></li>
</ul>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="s2">&quot;CONNECT</span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="n">或以</span> <span class="s2">&quot;+LINK_CONN:&quot;</span> <span class="n">开头的提示信息</span>
<span class="o">-</span> <span class="s2">&quot;CLOSED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;WIFI CONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;WIFI GOT IP</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;WIFI GOT IPv6 LL</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;WIFI GOT IPv6 GL</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;WIFI DISCONNECT</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+ETH_CONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+ETH_DISCONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="n">以</span> <span class="s2">&quot;+ETH_GOT_IP:&quot;</span> <span class="n">开头的提示信息</span>
<span class="o">-</span> <span class="n">以</span> <span class="s2">&quot;+STA_CONNECTED:&quot;</span> <span class="n">开头的提示信息</span>
<span class="o">-</span> <span class="n">以</span> <span class="s2">&quot;+STA_DISCONNECTED:&quot;</span> <span class="n">开头的提示信息</span>
<span class="o">-</span> <span class="n">以</span> <span class="s2">&quot;+DIST_STA_IP:&quot;</span> <span class="n">开头的提示信息</span>
<span class="o">-</span> <span class="n">以</span> <span class="s2">&quot;+BLECONN:&quot;</span> <span class="n">开头的提示信息</span>
<span class="o">-</span> <span class="n">以</span> <span class="s2">&quot;+BLEDISCONN:&quot;</span> <span class="n">开头的提示信息</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</section>
<section id="id60">
<h3>说明<a class="headerlink" href="#id60" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>若 <a class="reference internal" href="#cmd-sysstore"><span class="std std-ref">AT+SYSSTORE=1</span></a>，配置更改将被保存在 NVS 分区。</p></li>
<li><p>若设 Bit0 为 1，退出 Wi-Fi <span class="xref std std-term">透传模式</span> 时会提示 <code class="docutils literal notranslate"><span class="pre">+QUITT</span></code>。</p></li>
<li><p>若设 Bit1 为 1，将会影响 <span class="xref std std-ref">AT+CIPSTART</span> 和 <span class="xref std std-ref">AT+CIPSERVER</span> 命令，系统将提示 &quot;+LINK_CONN:status_type,link_id,ip_type,terminal_type,remote_ip,remote_port,local_port&quot;，而不是 &quot;XX,CONNECT&quot;。</p></li>
</ul>
</section>
<section id="id61">
<h3>示例<a class="headerlink" href="#id61" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">退出</span> <span class="n">Wi</span><span class="o">-</span><span class="n">Fi</span> <span class="n">透传模式时不打印提示信息</span>
<span class="o">//</span> <span class="n">连接时打印详细版提示信息</span>
<span class="o">//</span> <span class="n">连接状态发生改变时不打印信息</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SYSMSG</span><span class="o">=</span><span class="mi">2</span>
</pre></div>
</div>
<p>或</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 透传模式下，Wi-Fi、socket、Bluetooth LE 或 Bluetooth 状态改变时会打印提示信息
AT+SYSMSG=4
</pre></div>
</div>
</section>
</section>
<section id="at-sysmsgfilter">
<span id="cmd-sysmsgfilter"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSMSGFILTER</span></a>：启用或禁用 <span class="xref std std-term">系统消息</span> 过滤<a class="headerlink" href="#at-sysmsgfilter" title="Link to this heading"></a></h2>
<section id="id62">
<h3>查询命令<a class="headerlink" href="#id62" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询当前系统信息过滤的状态</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSMSGFILTER?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMSGFILTER</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id63">
<h3>设置命令<a class="headerlink" href="#id63" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>启用或禁用系统消息过滤</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMSGFILTER</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id64">
<h3>参数<a class="headerlink" href="#id64" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>&lt;enable&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>0：禁用系统消息过滤。系统默认值。禁用后，系统消息不会被设置的过滤器过滤。</p></li>
<li><p>1：启用系统消息过滤。开启后，系统消息被正则表达式匹配上的数据会被 AT 过滤掉，MCU 不会收到；而未被正则表达式匹配上的数据，会原样发往 MCU。</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id65">
<h3>说明<a class="headerlink" href="#id65" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>请先使用 <a class="reference internal" href="#cmd-sysmsgfiltercfg"><span class="std std-ref">AT+SYSMSGFILTERCFG</span></a> 命令配置有效的过滤器，再通过本命令启用或禁用系统消息过滤，实现更加精细的系统消息管理。</p></li>
<li><p>请谨慎使用 <a class="reference internal" href="#cmd-sysmsgfilter"><span class="std std-ref">AT+SYSMSGFILTER=1</span></a> 命令，建议您开启系统消息过滤后要及时禁用，防止 AT 的系统消息被过度过滤。</p></li>
<li><p>在进入 <span class="xref std std-term">透传模式</span> 前，强烈建议使用 <a class="reference internal" href="#cmd-sysmsgfilter"><span class="std std-ref">AT+SYSMSGFILTER=0</span></a> 命令，禁用系统消息过滤。</p></li>
<li><p>如果您基于 AT 工程二次开发，请使用如下的 APIs 实现 AT 命令口的数据发送。</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 原生的 AT 命令口的数据发送。数据不会被 AT+SYSMSGFILTER 命令过滤，发送数据前也不会唤醒 MCU（AT+USERWKMCUCFG 命令设置的 MCU 唤醒功能）。
int32_t esp_at_port_write_data_without_filter(uint8_t data, int32_t len);

// 具有过滤功能的 AT 命令口的数据发送。数据会被 AT+SYSMSGFILTER 命令过滤（如果启用），发送数据前不会唤醒 MCU（AT+USERWKMCUCFG 命令设置的 MCU 唤醒功能）。
int32_t esp_at_port_write_data(uint8_t data, int32_t len);

// 具有唤醒 MCU 功能的 AT 命令口的数据发送。数据不会被 AT+SYSMSGFILTER 命令过滤，发送数据前会唤醒 MCU（AT+USERWKMCUCFG 命令设置的 MCU 唤醒功能）。
int32_t esp_at_port_active_write_data_without_filter(uint8_t data, int32_t len);

// 同时具有唤醒 MCU 功能和过滤功能的 AT 命令口的数据发送。数据会被 AT+SYSMSGFILTER 命令过滤（如果启用），发送数据前会唤醒 MCU（AT+USERWKMCUCFG 命令设置的 MCU 唤醒功能）。
int32_t esp_at_port_active_write_data(uint8_t data, int32_t len);
</pre></div>
</div>
<section id="id66">
<h4>示例<a class="headerlink" href="#id66" title="Link to this heading"></a></h4>
<p>详细示例参考： <span class="xref std std-ref">系统消息过滤示例</span>。</p>
</section>
</section>
</section>
<section id="at-sysmsgfiltercfg">
<span id="cmd-sysmsgfiltercfg"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSMSGFILTERCFG</span></a>：查询/配置 <span class="xref std std-term">系统消息</span> 的过滤器<a class="headerlink" href="#at-sysmsgfiltercfg" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#sysmsgfiltercfg-query"><span class="std std-ref">查询过滤器</span></a></p></li>
<li><p><a class="reference internal" href="#sysmsgfiltercfg-clear"><span class="std std-ref">清除所有过滤器</span></a></p></li>
<li><p><a class="reference internal" href="#sysmsgfiltercfg-add"><span class="std std-ref">增加一个过滤器</span></a></p></li>
<li><p><a class="reference internal" href="#sysmsgfiltercfg-delete"><span class="std std-ref">删除一个过滤器</span></a></p></li>
</ul>
<section id="sysmsgfiltercfg-query">
<span id="id67"></span><h3>查询过滤器<a class="headerlink" href="#sysmsgfiltercfg-query" title="Link to this heading"></a></h3>
<section id="id68">
<h4>查询命令<a class="headerlink" href="#id68" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSMSGFILTERCFG?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMSGFILTERCFG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">index</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;head_regexp&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;tail_regexp&gt;&quot;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id69">
<h4>参数<a class="headerlink" href="#id69" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>&lt;index&gt;</strong>：过滤器的索引。</p></li>
<li><p><strong>&lt;&quot;head_regexp&quot;&gt;</strong>：头部正则表达式。</p></li>
<li><p><strong>&lt;&quot;tail_regexp&quot;&gt;</strong>：尾部正则表达式。</p></li>
</ul>
</section>
</section>
<section id="sysmsgfiltercfg-clear">
<span id="id70"></span><h3>清除所有过滤器<a class="headerlink" href="#sysmsgfiltercfg-clear" title="Link to this heading"></a></h3>
<section id="id71">
<h4>设置命令<a class="headerlink" href="#id71" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMSGFILTERCFG</span><span class="o">=&lt;</span><span class="n">operator</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id72">
<h4>参数<a class="headerlink" href="#id72" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;operator&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>0：清除所有过滤器。清除后，可以释放一些过滤器所占用的堆空间大小。</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id73">
<h4>示例<a class="headerlink" href="#id73" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">清除所有过滤器</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SYSMSGFILTERCFG</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="sysmsgfiltercfg-add">
<span id="id74"></span><h3>增加一个过滤器<a class="headerlink" href="#sysmsgfiltercfg-add" title="Link to this heading"></a></h3>
<section id="id75">
<h4>设置命令<a class="headerlink" href="#id75" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMSGFILTERCFG</span><span class="o">=&lt;</span><span class="n">operator</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">head_regexp_len</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tail_regexp_len</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
<p>上述响应表示 AT 已准备好接收 AT 命令口的数据，此时您可以输入数据（即：头部正则表达式和尾部正则表达式），当 AT 接收到的数据长度达到 <code class="docutils literal notranslate"><span class="pre">&lt;head_regexp_len&gt;</span></code> + <code class="docutils literal notranslate"><span class="pre">&lt;tail_regexp_len&gt;</span></code> 后，进行正则表达式完整性校验。</p>
<p>如果正则表达式完整性校验失败或添加过滤器失败，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
<p>如果正则表达式完整性校验成功且添加过滤器成功，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id76">
<h4>参数<a class="headerlink" href="#id76" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;operator&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>1：增加一个过滤器。一个过滤器包含头部正则表达式和尾部正则表达式。</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;head_regexp_len&gt;</strong>：头部正则表达式长度。范围：[0,64]。如果设置为 0，代表忽略头部正则表达式的匹配，同时 <code class="docutils literal notranslate"><span class="pre">&lt;tail_regexp_len&gt;</span></code> 不能为 0。</p></li>
<li><p><strong>&lt;tail_regexp_len&gt;</strong>：尾部正则表达式长度。范围：[0,64]。如果设置为 0，代表忽略尾部正则表达式的匹配，同时 <code class="docutils literal notranslate"><span class="pre">&lt;head_regexp_len&gt;</span></code> 不能为 0。</p></li>
</ul>
</section>
<section id="id77">
<h4>说明<a class="headerlink" href="#id77" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>请先使用本命令配置有效的过滤器，再通过 <a class="reference internal" href="#cmd-sysmsgfilter"><span class="std std-ref">AT+SYSMSGFILTER</span></a> 命令启用或禁用系统消息过滤，实现更加精细的系统消息管理。</p></li>
<li><p>头部和尾部正则表达式格式参考 <a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression#POSIX_basic_and_extended">POSIX 基本正则语法（BRE）</a>。</p></li>
<li><p>为了避免 <span class="xref std std-term">系统消息</span> (AT 命令口的 TX 数据) 被错误过滤，<strong>强烈建议</strong> 头部正则表达式以 <code class="docutils literal notranslate"><span class="pre">^</span></code> 开头，尾部正则表达式以 <code class="docutils literal notranslate"><span class="pre">$</span></code> 结束。</p></li>
<li><p>只有系统消息 <strong>同时匹配</strong> 上头部正则表达式和尾部正则表达式时，系统消息才会被过滤。过滤后，系统消息被正则表达式匹配上的数据会被 AT 过滤掉，MCU 不会收到；而未被正则表达式匹配上的数据，会原样发往 MCU。</p></li>
<li><p>当系统消息匹配到一个过滤器后，不会再继续匹配其它的过滤器。</p></li>
<li><p>系统消息匹配过滤器时，系统消息不会缓存，即不会将上一条的系统消息和本条系统消息合在一起，进行匹配。</p></li>
<li><p>对于吞吐量较大的设备，强烈建议您设置较少的过滤器，同时及时通过 <a class="reference internal" href="#cmd-sysmsgfilter"><span class="std std-ref">AT+SYSMSGFILTER=0</span></a> 命令禁用系统消息过滤。</p></li>
</ul>
</section>
<section id="id78">
<h4>示例<a class="headerlink" href="#id78" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 设置过滤器，过滤掉 &quot;WIFI CONNECTED&quot; 系统消息报告
AT+SYSMSGFILTERCFG=1,17,0
// 等待命令返回 OK 和 &gt; 后，输入 ^WIFI CONNECTED\r\n（注意 \r\n 占用 2 个字节，对应 ASCII 码中的 0D 0A）

// 开启系统消息过滤
AT+SYSMSGFILTER=1

// 测试过滤功能
AT+CWMODE=1
AT+CWJAP=&quot;ssid&quot;,&quot;password&quot;
// AT 不再输出 WIFI CONNECTED 系统消息报告
</pre></div>
</div>
<p>详细示例参考：<span class="xref std std-ref">系统消息过滤示例</span>。</p>
</section>
</section>
<section id="sysmsgfiltercfg-delete">
<span id="id79"></span><h3>删除一个过滤器<a class="headerlink" href="#sysmsgfiltercfg-delete" title="Link to this heading"></a></h3>
<section id="id80">
<h4>设置命令<a class="headerlink" href="#id80" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMSGFILTERCFG</span><span class="o">=&lt;</span><span class="n">operator</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">head_regexp_len</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tail_regexp_len</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
<p>上述响应表示 AT 已准备好接收 AT 命令口的数据，此时您可以输入数据（即：头部正则表达式和尾部正则表达式），当 AT 接收到的数据长度达到 <code class="docutils literal notranslate"><span class="pre">&lt;head_regexp_len&gt;</span></code> + <code class="docutils literal notranslate"><span class="pre">&lt;tail_regexp_len&gt;</span></code> 后，进行正则表达式完整性校验。</p>
<p>如果正则表达式完整性校验失败或删除过滤器失败，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
<p>如果正则表达式完整性校验成功且删除过滤器成功，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id81">
<h4>参数<a class="headerlink" href="#id81" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;operator&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>2：删除一个过滤器。</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;head_regexp_len&gt;</strong>：头部正则表达式长度。范围：[0,64]。如果设置为 0，则 <code class="docutils literal notranslate"><span class="pre">&lt;tail_regexp_len&gt;</span></code> 不能为 0。</p></li>
<li><p><strong>&lt;tail_regexp_len&gt;</strong>：尾部正则表达式长度。范围：[0,64]。如果设置为 0，则 <code class="docutils literal notranslate"><span class="pre">&lt;head_regexp_len&gt;</span></code> 不能为 0。</p></li>
</ul>
</section>
<section id="id82">
<h4>说明<a class="headerlink" href="#id82" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>待删除的过滤器应在已增加的过滤器中。</p></li>
</ul>
</section>
<section id="id83">
<h4>示例<a class="headerlink" href="#id83" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 删除上述添加的过滤器
AT+SYSMSGFILTERCFG=2,17,0
// 等待命令返回 OK 和 &gt; 后，输入 ^WIFI CONNECTED\r\n（注意 \r\n 占用 2 个字节，对应 ASCII 码中的 0D 0A）

// 测试功能
AT+CWMODE=1
AT+CWJAP=&quot;ssid&quot;,&quot;password&quot;
// AT 会输出 WIFI CONNECTED 系统消息报告
</pre></div>
</div>
</section>
</section>
</section>
<section id="at-sysflash-flash">
<span id="cmd-sysflash"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSFLASH</span></a>：查询或读写 flash 用户分区<a class="headerlink" href="#at-sysflash-flash" title="Link to this heading"></a></h2>
<section id="id84">
<h3>查询命令<a class="headerlink" href="#id84" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询 flash 用户分区</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSFLASH?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSFLASH</span><span class="p">:</span><span class="o">&lt;</span><span class="n">partition</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">subtype</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id85">
<h3>设置命令<a class="headerlink" href="#id85" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>读、写、擦除 flash 用户分区</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSFLASH</span><span class="o">=&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">partition</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">offset</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSFLASH</span><span class="p">:</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id86">
<h3>参数<a class="headerlink" href="#id86" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;operation&gt;</strong>：</p>
<ul>
<li><p>0：擦除分区</p></li>
<li><p>1：写分区</p></li>
<li><p>2：读分区</p></li>
</ul>
</li>
<li><p><strong>&lt;partition&gt;</strong>：用户分区名称</p></li>
<li><p><strong>&lt;offset&gt;</strong>：偏移地址</p></li>
<li><p><strong>&lt;length&gt;</strong>：数据长度</p></li>
<li><p><strong>&lt;type&gt;</strong>：用户分区类型</p></li>
<li><p><strong>&lt;subtype&gt;</strong>：用户分区子类型</p></li>
<li><p><strong>&lt;addr&gt;</strong>：用户分区地址</p></li>
<li><p><strong>&lt;size&gt;</strong>：用户分区大小</p></li>
</ul>
</section>
<section id="id87">
<h3>说明<a class="headerlink" href="#id87" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>使用本命令需烧录 at_customize.bin，详细信息可参考 <span class="xref std std-doc">../Compile_and_Develop/How_to_customize_partitions</span>。</p></li>
<li><p>擦除分区时，请完整擦除该目标分区。这可以通过省略 <code class="docutils literal notranslate"><span class="pre">&lt;offset&gt;</span></code> 和 <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code> 参数来完成。例如，指令 <code class="docutils literal notranslate"><span class="pre">AT+SYSFLASH=0,&quot;mfg_nvs&quot;</span></code> 可擦除整个 &quot;mfg_nvs&quot; 区域。</p></li>
<li><p>关于分区的定义可参考 <a class="reference external" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/{IDF_TARGET_PATH_NAME}/api-guides/partition-tables.html">ESP-IDF 分区表</a>。</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">&lt;operator&gt;</span></code> 为 <code class="docutils literal notranslate"><span class="pre">write</span></code> 时，系统收到此命令后先换行返回 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>，此时您可以输入要写的数据，数据长度应与 <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code> 一致。</p></li>
<li><p>写分区前，请先擦除该分区。</p></li>
<li><p>如果您想修改 mfg_nvs 分区中的某些数据，请使用 <a class="reference internal" href="#cmd-sysmfg"><span class="std std-ref">AT+SYSMFG</span></a> 命令（NVS 中的键值对操作）。如果您想修改整个 mfg_nvs 分区，请使用 <a class="reference internal" href="#cmd-sysflash"><span class="std std-ref">AT+SYSFLASH</span></a> 命令（分区操作）。</p></li>
</ul>
</section>
<section id="id88">
<h3>示例<a class="headerlink" href="#id88" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 擦除整个 &quot;mfg_nvs&quot; 分区
AT+SYSFLASH=0,&quot;mfg_nvs&quot;

// 在 &quot;mfg_nvs&quot; 分区偏移地址 0 处写入新的 &quot;mfg_nvs&quot; 分区（大小为 0x1C000）
AT+SYSFLASH=1,&quot;mfg_nvs&quot;,0,0x1C000
</pre></div>
</div>
</section>
</section>
<section id="at-sysmfg-manufacturing-nvs">
<span id="cmd-sysmfg"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSMFG</span></a>：查询或读写 <span class="xref std std-term">manufacturing nvs</span> 用户分区<a class="headerlink" href="#at-sysmfg-manufacturing-nvs" title="Link to this heading"></a></h2>
<section id="id89">
<h3>查询命令<a class="headerlink" href="#id89" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询 manufacturing nvs 用户分区内的命名空间 (namespace)</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSMFG?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMFG</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id90">
<h3>擦除命名空间或键值对<a class="headerlink" href="#id90" title="Link to this heading"></a></h3>
<section id="id91">
<h4>设置命令<a class="headerlink" href="#id91" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMFG</span><span class="o">=&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;key&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id92">
<h4>参数<a class="headerlink" href="#id92" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;operation&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>0：擦除操作</p></li>
<li><p>1：读取操作</p></li>
<li><p>2：写入操作</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;&quot;namespace&quot;&gt;</strong>：命名空间。</p></li>
<li><p><strong>&lt;&quot;key&quot;&gt;</strong>：主键，或称为键。当 <code class="docutils literal notranslate"><span class="pre">&lt;&quot;key&quot;&gt;</span></code> 缺省时，擦除 <code class="docutils literal notranslate"><span class="pre">&lt;&quot;namespace&quot;&gt;</span></code> 内所有的键值对；否则只擦除当前指定的 <code class="docutils literal notranslate"><span class="pre">&lt;&quot;key&quot;&gt;</span></code> 的键值对。</p></li>
</ul>
</section>
</section>
<section id="id93">
<h3>说明<a class="headerlink" href="#id93" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>请先阅读 <a class="reference external" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/api-reference/storage/nvs_flash.html">非易失性存储 (NVS)</a>，了解命名空间、键值对的概念。</p></li>
</ul>
<section id="id94">
<h4>示例<a class="headerlink" href="#id94" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 擦除 client_cert 命名空间内所有的键值对（即：擦除默认的第 0 套和第 1 套客户端证书）
AT+SYSMFG=0,&quot;client_cert&quot;

// 擦除 client_cert 命名空间内的 client_cert.0 键值对（即：擦除默认的第 0 套客户端证书）
AT+SYSMFG=0,&quot;client_cert&quot;,&quot;client_cert.0&quot;
</pre></div>
</div>
</section>
</section>
<section id="id95">
<h3>读取命名空间或键值对<a class="headerlink" href="#id95" title="Link to this heading"></a></h3>
<section id="id96">
<h4>设置命令<a class="headerlink" href="#id96" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMFG</span><span class="o">=&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;key&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">offset</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<p>当 <code class="docutils literal notranslate"><span class="pre">&lt;&quot;namespace&quot;&gt;</span></code> 以及之后参数缺省时，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMFG</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
<p>当 <code class="docutils literal notranslate"><span class="pre">&lt;&quot;key&quot;&gt;</span></code> 以及之后参数缺省时，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMFG</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;key&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
<p>其余情况，返回：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMFG</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;key&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id97">
<h4>参数<a class="headerlink" href="#id97" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;operation&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>0：擦除操作</p></li>
<li><p>1：读取操作</p></li>
<li><p>2：写入操作</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;&quot;namespace&quot;&gt;</strong>：命名空间。</p></li>
<li><p><strong>&lt;&quot;key&quot;&gt;</strong>：主键，或称为键。</p></li>
<li><p><strong>&lt;offset&gt;</strong>：键值的偏移。</p></li>
<li><p><strong>&lt;length&gt;</strong>：键值的长度。</p></li>
<li><p><strong>&lt;type&gt;</strong>：键值的类型。</p>
<ul class="simple">
<li><p>1：u8</p></li>
<li><p>2：i8</p></li>
<li><p>3：u16</p></li>
<li><p>4：i16</p></li>
<li><p>5：u32</p></li>
<li><p>6：i32</p></li>
<li><p>7：string</p></li>
<li><p>8：binary</p></li>
</ul>
</li>
<li><p><strong>&lt;value&gt;</strong>：键值的数据。</p></li>
</ul>
</section>
</section>
<section id="id98">
<h3>说明<a class="headerlink" href="#id98" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>请先阅读 <a class="reference external" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/api-reference/storage/nvs_flash.html">非易失性存储 (NVS)</a>，了解命名空间、键值对的概念。</p></li>
</ul>
<section id="id100">
<h4>示例<a class="headerlink" href="#id100" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 读取当前所有的命名空间
AT+SYSMFG=1

// 读取 client_cert 命名空间内所有的主键
AT+SYSMFG=1,&quot;client_cert&quot;

// 读取 client_cert 命名空间内的 client_cert.0 主键的值
AT+SYSMFG=1,&quot;client_cert&quot;,&quot;client_cert.0&quot;

// 读取 client_cert 命名空间内的 client_cert.0 主键的值，从偏移 100 的位置读取 200 字节
AT+SYSMFG=1,&quot;client_cert&quot;,&quot;client_cert.0&quot;,100,200
</pre></div>
</div>
</section>
</section>
<section id="id101">
<h3>向命名空间内写入键值对<a class="headerlink" href="#id101" title="Link to this heading"></a></h3>
<section id="id102">
<h4>设置命令<a class="headerlink" href="#id102" title="Link to this heading"></a></h4>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMFG</span><span class="o">=&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;namespace&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;key&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id103">
<h4>参数<a class="headerlink" href="#id103" title="Link to this heading"></a></h4>
<ul>
<li><p><strong>&lt;operation&gt;</strong>：</p>
<blockquote>
<div><ul class="simple">
<li><p>0：擦除操作</p></li>
<li><p>1：读取操作</p></li>
<li><p>2：写入操作</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;&quot;namespace&quot;&gt;</strong>：命名空间。</p></li>
<li><p><strong>&lt;&quot;key&quot;&gt;</strong>：主键，或称为键。</p></li>
<li><p><strong>&lt;type&gt;</strong>：键值的类型。</p>
<ul class="simple">
<li><p>1：u8</p></li>
<li><p>2：i8</p></li>
<li><p>3：u16</p></li>
<li><p>4：i16</p></li>
<li><p>5：u32</p></li>
<li><p>6：i32</p></li>
<li><p>7：string</p></li>
<li><p>8：binary</p></li>
</ul>
</li>
<li><p><strong>&lt;value&gt;</strong>：参数 <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> 不同，则此参数意义不同：</p>
<ul class="simple">
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> 是 1-6，<code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> 代表键值的数据。</p></li>
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> 是 7-8，<code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> 代表键值的数据的长度。在您发送完此条命令后，AT 返回 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>，表示 AT 已准备好接收串行数据，此时您可以输入数据，当 AT 接收到的数据长度达到 <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> 后，则立即向命名空间内写入键值对。</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="id104">
<h3>说明<a class="headerlink" href="#id104" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>请先阅读 <a class="reference external" href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/api-reference/storage/nvs_flash.html">非易失性存储 (NVS)</a>，了解命名空间、键值对的概念。</p></li>
<li><p>写入前，您无需主动擦除命名空间或键值对（NVS 会根据需要自动擦除键值对）。</p></li>
<li><p>如果您想修改 mfg_nvs 分区中的某些数据，请使用 <a class="reference internal" href="#cmd-sysmfg"><span class="std std-ref">AT+SYSMFG</span></a> 命令（NVS 中的键值对操作）。如果您想修改整个 mfg_nvs 分区，请使用 <a class="reference internal" href="#cmd-sysflash"><span class="std std-ref">AT+SYSFLASH</span></a> 命令（分区操作）。</p></li>
</ul>
<section id="id106">
<h4>示例<a class="headerlink" href="#id106" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 向 client_cert 命名空间内的 client_cert.0 键写入新的值 (即：更新 client_cert 命名空间内的第 0 套客户端证书)
AT+SYSMFG=2,&quot;client_cert&quot;,&quot;client_cert.0&quot;,8,1164

// 等待串口返回 &gt; 后，写入 1164 字节的证书文件
</pre></div>
</div>
</section>
</section>
</section>
<section id="at-rfpower-rf-tx-power">
<span id="cmd-rfpower"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+RFPOWER</span></a>：查询/设置 RF TX Power<a class="headerlink" href="#at-rfpower-rf-tx-power" title="Link to this heading"></a></h2>
<section id="id107">
<h3>查询命令<a class="headerlink" href="#id107" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询 RF TX Power</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+RFPOWER?
</pre></div>
</div>
<p><strong>响应：</strong></p>
</section>
<section id="id108">
<h3>设置命令<a class="headerlink" href="#id108" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id109">
<h3>参数<a class="headerlink" href="#id109" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;wifi_power&gt;</strong>：单位为 0.25 dBm，比如设定的参数值为 78，则实际的 RF Power 值为 78 * 0.25 dBm = 19.5 dBm。配置后可运行 <code class="docutils literal notranslate"><span class="pre">AT+RFPOWER?</span></code> 命令确认实际的 RF Power 值。</p>
</li>
</ul>
</section>
</section>
<section id="id110">
<h2>说明<a class="headerlink" href="#id110" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>当 Wi-Fi 关闭或未初始化时，<code class="docutils literal notranslate"><span class="pre">AT+RFPOWER</span></code> 命令无法设置/查询 Wi-Fi 的 RF TX Power。当 Bluetooth LE 未初始化时，<code class="docutils literal notranslate"><span class="pre">AT+RFPOWER</span></code> 命令无法设置/查询 Bluetooth LE 的 RF TX Power。</p></li>
<li><p>由于 RF TX Power 分为不同的等级，而每个等级都有与之对应的取值范围，所以通过 <code class="docutils literal notranslate"><span class="pre">esp_wifi_get_max_tx_power</span></code> 查询到的 <code class="docutils literal notranslate"><span class="pre">wifi_power</span></code> 的值可能与 <code class="docutils literal notranslate"><span class="pre">esp_wifi_set_max_tx_power</span></code> 设定的值存在差异，但不会比该值大。</p></li>
<li><p>建议将 &lt;ble_scan_power&gt; 和 &lt;ble_conn_power&gt; 两个参数值设置为与 &lt;ble_adv_power&gt; 参数相同的值，否则，这两个参数将会被自动设置为与 &lt;ble_adv_power&gt; 相同的值。</p></li>
</ul>
</section>
<section id="at-sysrollback">
<span id="cmd-sysrollback"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSROLLBACK</span></a>：回滚到以前的固件<a class="headerlink" href="#at-sysrollback" title="Link to this heading"></a></h2>
<section id="id111">
<h3>执行命令<a class="headerlink" href="#id111" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSROLLBACK</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id112">
<h3>说明<a class="headerlink" href="#id112" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>本命令不通过 OTA 升级，只会回滚到另一 OTA 分区的固件。</p></li>
</ul>
</section>
</section>
<section id="at-systimestamp">
<span id="cmd-settime"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSTIMESTAMP</span></a>：查询/设置本地时间戳<a class="headerlink" href="#at-systimestamp" title="Link to this heading"></a></h2>
<section id="id113">
<h3>查询命令<a class="headerlink" href="#id113" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询本地时间戳</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSTIMESTAMP?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSTIMESTAMP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">Unix_timestamp</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id114">
<h3>设置命令<a class="headerlink" href="#id114" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>设置本地时间戳，当 SNTP 时间更新后，将与之同步更新</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSTIMESTAMP</span><span class="o">=&lt;</span><span class="n">Unix_timestamp</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id115">
<h3>参数<a class="headerlink" href="#id115" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;Unix-timestamp&gt;</strong>：Unix 时间戳，单位：秒。</p></li>
</ul>
</section>
<section id="id116">
<h3>示例<a class="headerlink" href="#id116" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSTIMESTAMP</span><span class="o">=</span><span class="mi">1565853509</span>    <span class="o">//</span><span class="mi">2019</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">15</span> <span class="mi">15</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">29</span>
</pre></div>
</div>
</section>
</section>
<section id="at-syslog-at">
<span id="cmd-syslog"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSLOG</span></a>：启用或禁用 AT 错误代码提示<a class="headerlink" href="#at-syslog-at" title="Link to this heading"></a></h2>
<section id="id117">
<h3>查询命令<a class="headerlink" href="#id117" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询 AT 错误代码提示是否启用</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSLOG?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSLOG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">status</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id118">
<h3>设置命令<a class="headerlink" href="#id118" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>启用或禁用 AT 错误代码提示</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSLOG</span><span class="o">=&lt;</span><span class="n">status</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id119">
<h3>参数<a class="headerlink" href="#id119" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;status&gt;</strong>：错误代码提示状态</p>
<ul>
<li><p>0：禁用</p></li>
<li><p>1：启用</p></li>
</ul>
</li>
</ul>
</section>
<section id="id120">
<h3>示例<a class="headerlink" href="#id120" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">启用</span> <span class="n">AT</span> <span class="n">错误代码提示</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SYSLOG</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>
<span class="n">AT</span><span class="o">+</span><span class="n">FAKE</span>
<span class="n">ERR</span> <span class="n">CODE</span><span class="p">:</span><span class="mh">0x01090000</span>

<span class="n">ERROR</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// 禁用 AT 错误代码提示
AT+SYSLOG=0

OK
AT+FAKE
// 不提示 `ERR CODE:0x01090000`

ERROR
</pre></div>
</div>
<p>AT 错误代码是一个 32 位十六进制数值，定义如下：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>类型</p></th>
<th class="head"><p>子类型</p></th>
<th class="head"><p>扩展</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>bit32 ~ bit24</p></td>
<td><p>bit23 ~ bit16</p></td>
<td><p>bit15 ~ bit0</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>category：</strong> 固定值 0x01</p></li>
<li><p><strong>subcategory：</strong> 错误类型</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>错误类型</p></th>
<th class="head"><p>错误代码</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ESP_AT_SUB_OK</p></td>
<td><p>0x00</p></td>
<td><p>OK</p></td>
</tr>
<tr class="row-odd"><td><p>ESP_AT_SUB_COMMON_ERROR</p></td>
<td><p>0x01</p></td>
<td><p>保留</p></td>
</tr>
<tr class="row-even"><td><p>ESP_AT_SUB_NO_TERMINATOR</p></td>
<td><p>0x02</p></td>
<td><p>未找到结束符（应以 &quot;rn&quot; 结尾）</p></td>
</tr>
<tr class="row-odd"><td><p>ESP_AT_SUB_NO_AT</p></td>
<td><p>0x03</p></td>
<td><p>未找到起始 AT（输入的可能是 at、At 或 aT）</p></td>
</tr>
<tr class="row-even"><td><p>ESP_AT_SUB_PARA_LENGTH_MISMATCH</p></td>
<td><p>0x04</p></td>
<td><p>参数长度不匹配</p></td>
</tr>
<tr class="row-odd"><td><p>ESP_AT_SUB_PARA_TYPE_MISMATCH</p></td>
<td><p>0x05</p></td>
<td><p>参数类型不匹配</p></td>
</tr>
<tr class="row-even"><td><p>ESP_AT_SUB_PARA_NUM_MISMATCH</p></td>
<td><p>0x06</p></td>
<td><p>参数数量不匹配</p></td>
</tr>
<tr class="row-odd"><td><p>ESP_AT_SUB_PARA_INVALID</p></td>
<td><p>0x07</p></td>
<td><p>无效参数</p></td>
</tr>
<tr class="row-even"><td><p>ESP_AT_SUB_PARA_PARSE_FAIL</p></td>
<td><p>0x08</p></td>
<td><p>解析参数失败</p></td>
</tr>
<tr class="row-odd"><td><p>ESP_AT_SUB_UNSUPPORT_CMD</p></td>
<td><p>0x09</p></td>
<td><p>不支持该命令</p></td>
</tr>
<tr class="row-even"><td><p>ESP_AT_SUB_CMD_EXEC_FAIL</p></td>
<td><p>0x0A</p></td>
<td><p>执行命令失败</p></td>
</tr>
<tr class="row-odd"><td><p>ESP_AT_SUB_CMD_PROCESSING</p></td>
<td><p>0x0B</p></td>
<td><p>仍在执行上一条命令</p></td>
</tr>
<tr class="row-even"><td><p>ESP_AT_SUB_CMD_OP_ERROR</p></td>
<td><p>0x0C</p></td>
<td><p>命令操作类型错误</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>extension：</strong> 错误扩展信息，不同的子类型有不同的扩展信息，详情请见 <code class="docutils literal notranslate"><span class="pre">components/at/include/esp_at.h</span></code>。</p></li>
</ul>
<p>例如，错误代码 <code class="docutils literal notranslate"><span class="pre">ERR</span> <span class="pre">CODE:0x01090000</span></code> 表示“不支持该命令”。</p>
</section>
</section>
<section id="at-sleepwkcfg-light-sleep-gpio">
<span id="cmd-wkcfg"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SLEEPWKCFG</span></a>：设置 Light-sleep 唤醒源和唤醒 GPIO<a class="headerlink" href="#at-sleepwkcfg-light-sleep-gpio" title="Link to this heading"></a></h2>
<section id="id121">
<h3>设置命令<a class="headerlink" href="#id121" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLEEPWKCFG</span><span class="o">=&lt;</span><span class="n">wakeup</span> <span class="n">source</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">param1</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">param2</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id122">
<h3>参数<a class="headerlink" href="#id122" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>&lt;wakeup source&gt;</strong>: 唤醒源</p>
<ul class="simple">
<li><p>0：保留配置，暂不支持</p></li>
<li><p>1：保留配置，暂不支持</p></li>
<li><p>2：GPIO 唤醒</p></li>
</ul>
</li>
<li><p><strong>&lt;param1&gt;</strong>:</p>
<ul class="simple">
<li><p>当唤醒源为定时器时，该参数表示睡眠时间，单位：毫秒</p></li>
<li><p>当唤醒源为 GPIO 时，该参数表示 GPIO 管脚</p></li>
</ul>
</li>
<li><p><strong>&lt;param2&gt;</strong>:</p>
<ul class="simple">
<li><p>当唤醒源为 GPIO 时，该参数表示唤醒电平</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>0：低电平</p></li>
<li><p>1：高电平</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id123">
<h3>示例<a class="headerlink" href="#id123" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GPIO12</span> <span class="n">置为低电平时唤醒</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SLEEPWKCFG</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-sysstore">
<span id="cmd-sysstore"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSSTORE</span></a>：设置参数存储模式<a class="headerlink" href="#at-sysstore" title="Link to this heading"></a></h2>
<section id="id124">
<h3>查询命令<a class="headerlink" href="#id124" title="Link to this heading"></a></h3>
<p><strong>功能：</strong></p>
<p>查询 AT 参数存储模式</p>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSSTORE?
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSSTORE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">store_mode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id125">
<h3>设置命令<a class="headerlink" href="#id125" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSSTORE</span><span class="o">=&lt;</span><span class="n">store_mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id126">
<h3>参数<a class="headerlink" href="#id126" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;store_mode&gt;</strong>：参数存储模式</p>
<ul>
<li><p>0：命令配置不存入 flash</p></li>
<li><p>1：命令配置存入 flash（默认）</p></li>
</ul>
</li>
</ul>
</section>
<section id="id127">
<h3>说明<a class="headerlink" href="#id127" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>该命令只影响设置命令，不影响查询命令，因为查询命令总是从 RAM 中调用。</p></li>
<li><p>本命令会影响以下命令：</p></li>
</ul>
</section>
<section id="id128">
<h3>示例<a class="headerlink" href="#id128" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSSTORE</span><span class="o">=</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>  <span class="o">//</span> <span class="n">不存入</span> <span class="n">flash</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="s2">&quot;1234567890&quot;</span> <span class="o">//</span> <span class="n">不存入</span> <span class="n">flash</span>

<span class="n">AT</span><span class="o">+</span><span class="n">SYSSTORE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">3</span>  <span class="o">//</span> <span class="n">存入</span> <span class="n">flash</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="s2">&quot;1234567890&quot;</span> <span class="o">//</span> <span class="n">存入</span> <span class="n">flash</span>
</pre></div>
</div>
</section>
</section>
<section id="at-sysreg">
<span id="cmd-sysreg"></span><h2><a class="reference internal" href="#basic-at"><span class="std std-ref">AT+SYSREG</span></a>：读写寄存器<a class="headerlink" href="#at-sysreg" title="Link to this heading"></a></h2>
<section id="id129">
<h3>设置命令<a class="headerlink" href="#id129" title="Link to this heading"></a></h3>
<p><strong>命令：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSREG</span><span class="o">=&lt;</span><span class="n">direct</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">address</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">write</span> <span class="n">value</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>响应：</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSREG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">read</span> <span class="n">value</span><span class="o">&gt;</span>  <span class="o">//</span> <span class="n">仅适用于读寄存器时</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
<section id="id130">
<h3>参数<a class="headerlink" href="#id130" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>&lt;direct&gt;</strong>：读或写寄存器</p>
<ul>
<li><p>0：读寄存器</p></li>
<li><p>1：写寄存器</p></li>
</ul>
</li>
<li><p><strong>&lt;address&gt;</strong>：(uint32) 寄存器地址，详情请参考相关的《技术参考手册》</p></li>
<li><p><strong>&lt;write value&gt;</strong>：(uint32) 写入值，仅适用于写寄存器时</p></li>
</ul>
</section>
<section id="id131">
<h3>说明<a class="headerlink" href="#id131" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>AT 不检查寄存器地址，因此请确保操作的寄存器地址有效</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, bing.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>